!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["prop-types","react"],e):"object"==typeof exports?exports.VirtualList=e(require("prop-types"),require("react")):t.VirtualList=e(t["prop-types"],t.react)}(window,function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e);var o=n(1),i=n.n(o),r=n(0),s=n.n(r);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function e(){return a(this,e),h(this,p(e).apply(this,arguments))}return d(e,i.a.PureComponent),u(e,[{key:"render",value:function(){var t=this.props,e=t.itemIndex,n=t.itemView,o=t.item;return i.a.createElement("div",{className:"VirtualList-item"},i.a.cloneElement(n,{itemIndex:e,item:o}))}}]),e}(),y=function(t,e){var n,o,i=function(e,i){n=null,i&&(o=t.apply(e,i))},r=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return setTimeout(function(){return t.apply(null,o)},e)};return function(){n&&clearTimeout(n);for(var t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return n=r(i,e,void 0,s),o}};var g=function(t){function e(t){var n;return a(this,e),(n=h(this,p(e).call(this,t))).state={winStart:0,winSize:10,viewportHeight:1,avgRowHeight:1,scrollTop:0},n.onScroll=n.onScroll.bind(f(n)),n.debouncedOnScroll=t.debounce?y(n.debouncedOnScroll.bind(f(n)),30):n.debouncedOnScroll,n.checkForResize=n.checkForResize.bind(f(n)),n}return d(e,i.a.Component),u(e,[{key:"componentDidMount",value:function(){this._resizeTimer=setInterval(this.checkForResize,this.props.resizeInterval),this.handleResize(),this.sampleRowHeights()}},{key:"componentDidUpdate",value:function(){var t=this.node,e=this.content.childNodes,n=this.state,o=n.winSize,i=n.scrollTop;this.notifyFirstVisibleItemIfNecessary(),e.length<o&&this.sampleRowHeights(),t.scrollTop!==i&&(t.scrollTop=i)}},{key:"componentWillUnmount",value:function(){clearInterval(this._resizeTimer)}},{key:"checkForResize",value:function(){this.node.clientHeight!==this.state.viewportHeight&&this.handleResize()}},{key:"handleResize",value:function(){var t=this.node,e=this.state.avgRowHeight,n=t.clientHeight,o=Math.ceil(n/e)+this.props.buffer;n===this.state.viewportHeight&&o===this.state.winSize||this.setState({viewportHeight:n,winSize:o})}},{key:"sampleRowHeights",value:function(){var t=this.node,e=this.content.childNodes;if(e.length){for(var n=0,o=0;o<e.length;o++)n+=e[o].offsetHeight;var i=n/e.length,r=Math.ceil(t.clientHeight/i)+this.props.buffer;i===this.state.avgRowHeight&&r===this.state.winSize||this.setState({avgRowHeight:i,winSize:r})}}},{key:"notifyFirstVisibleItemIfNecessary",value:function(){if(this.props.onFirstVisibleItemChange){var t=this.findFirstVisibleItemIndex();this._firstIndex!==t&&(this.props.onFirstVisibleItemChange(this.props.items[t],t),this._firstIndex=t)}}},{key:"findFirstVisibleItemIndex",value:function(){for(var t=this.content.childNodes,e=(this.props.items,this.state),n=e.winStart,o=e.scrollTop,i=0;i<t.length;i++)if(t[i].offsetTop+t[i].offsetHeight>=o)return n+i}},{key:"handleDownwardScroll",value:function(t,e){for(var n=this.content.childNodes,o=this.props.items,i=this.state,r=i.winSize,s=i.avgRowHeight,l=Math.max(0,o.length-r),a=this.state,c=a.winStart,u=a.scrollTop,h=u+=t,f=0;f<n.length&&(c<l&&n[f].offsetTop+n[f].offsetHeight<h);f++)c++,u+=s-n[f].offsetHeight;u=Math.round(u),this.setState({winStart:c,scrollTop:u},e)}},{key:"handleUpwardScroll",value:function(t,e){var n=this,o=this.node,i=this.content.childNodes,r=this.state,s=r.winStart,l=r.scrollTop,a=(r.avgRowHeight,0);l+=t;for(var c=i.length-1;c>=0&&(s>0&&i[c].offsetTop-l>o.offsetHeight);c--)s--,a++;this.setState({winStart:s,scrollTop:l},function(){for(var t=n.content.childNodes,o=n.state.avgRowHeight,i=n.state.scrollTop,r=0;r<a;r++)i-=o-t[r].offsetHeight;i=Math.round(i),n.setState({scrollTop:i},e)})}},{key:"handleLongScroll",value:function(t,e){var n=this.props.items,o=this.state,i=o.winSize,r=o.avgRowHeight,s=this.state.scrollTop,l=Math.max(0,n.length-i);s+=t,this.setState({winStart:Math.min(l,Math.floor(s/r)),scrollTop:s},e)}},{key:"scroll",value:function(t,e){var n=this.state.viewportHeight;return Math.abs(t)>n?this.handleLongScroll(t,e):t>0?this.handleDownwardScroll(t,e):t<0&&this.handleUpwardScroll(t,e),this}},{key:"scrollToIndex",value:function(t,e){var n=this.props.items,o=this.state,i=o.winSize,r=o.avgRowHeight,s=Math.max(0,n.length-i),l=Math.min(s,t),a=l*r;this.setState({winStart:l,scrollTop:a},e)}},{key:"scrollToItem",value:function(t,e){var n=this.props.items.indexOf(t);return n>=0&&this.scrollToIndex(n,e),this}},{key:"scrollToTop",value:function(t){return this.scrollToIndex(0,t)}},{key:"itemsMutated",value:function(t){var e=this.props.items,n=this.state,o=n.winStart,i=n.winSize,r=Math.max(0,e.length-i);return o>r?this.setState({winStart:r},t):this.forceUpdate(t),this}},{key:"onScroll",value:function(t){t.persist(),t.target.scrollTop===this.state.scrollTop&&this.props.onScroll&&this.props.onScroll(t),this.debouncedOnScroll(t)}},{key:"debouncedOnScroll",value:function(t){var e=this.node,n=this.state.scrollTop;e.scrollTop!==n&&this.scroll(e.scrollTop-n),this.props.onScroll&&this.props.onScroll(t)}},{key:"render",value:function(){for(var t,e=this,n=this.props,o=n.items,r=n.getItem,s=n.getItemKey,l=n.scrollbarOffset,a=this.state,c=a.winStart,u=a.winSize,h=a.avgRowHeight,f=Math.min(o.length-1,c+u-1),p=c*h,d=Math.max((o.length-c-u)*h,0),m=Object.assign({position:"absolute",top:0,right:l,bottom:0,left:0,overflowY:"auto",overflowX:l?"hidden":void 0},this.props.style),y={paddingTop:p,paddingBottom:d,marginRight:-l},g=i.a.Children.only(this.props.children),b=[],w=c;w<=f;w++)t=r(o,w),b.push(i.a.createElement(v,{key:s(t,w),itemIndex:w,itemView:g,item:t}));return i.a.createElement("div",{ref:function(t){e.node=t},className:"VirtualList",tabIndex:"-1",style:m,onScroll:this.onScroll},i.a.createElement("div",{ref:function(t){e.content=t},className:"VirtualList-content",style:y},b))}}]),e}();g.propTypes={items:s.a.array.isRequired,getItem:s.a.func,getItemKey:s.a.func,onFirstVisibleItemChange:s.a.func,onScroll:s.a.func,buffer:s.a.number,scrollbarOffset:s.a.number,resizeInterval:s.a.number,style:s.a.object,debounce:s.a.bool},g.defaultProps={getItem:function(t,e){return t[e]},getItemKey:function(t,e){return e},buffer:4,scrollbarOffset:0,resizeInterval:1e3,debounce:!1},e.default=g}])});